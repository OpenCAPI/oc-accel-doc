<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Hardware Logic - OC-Accel Doc</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../extra.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">OC-Accel Doc</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../..">Overview</a>
</li>
                                    
<li >
    <a href="../../repository/">About the repository</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../user-guide/0-steps/">(0) Steps in a glance</a>
</li>
                                    
<li >
    <a href="../../user-guide/1-prepare-env/">(1) Prepare environment</a>
</li>
                                    
<li >
    <a href="../../user-guide/2-run-helloworld/">(2) Run helloworld</a>
</li>
                                    
<li >
    <a href="../../user-guide/3-new-action/">(3) Create a new action</a>
</li>
                                    
<li >
    <a href="../../user-guide/4-hdl-design/">(4) Verilog/VHDL design</a>
</li>
                                    
<li >
    <a href="../../user-guide/5-hls-design/">(5) HLS C++ design</a>
</li>
                                    
<li >
    <a href="../../user-guide/6-co-simulation/">(6) Co-Simulation</a>
</li>
                                    
<li >
    <a href="../../user-guide/7-build-image/">(7) Build image</a>
</li>
                                    
<li >
    <a href="../../user-guide/8-deploy/">(8) Deploy on Power Server</a>
</li>
                                    
<li >
    <a href="../../user-guide/9-migrate/">(9) Migrate from SNAP1/2</a>
</li>
                                    
<li >
    <a href="../../user-guide/10-tips/">(10) Tips</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../actions-doc/hdl_example/">hdl_example</a>
</li>
                                    
<li >
    <a href="../../actions-doc/hdl_single_engine/">hdl_single_engine</a>
</li>
                                    
<li >
    <a href="../../actions-doc/hls_helloworld/">hls_helloworld</a>
</li>
                                    
<li >
    <a href="../../actions-doc/hls_memcopy_1024/">hls_memcopy_1024</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Deep Dive <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../software-api/">Software API</a>
</li>
                                    
<li >
    <a href="../registers/">Registers</a>
</li>
                                    
<li class="active">
    <a href="./">Hardware Logic</a>
</li>
                                    
<li >
    <a href="../board-package/">New Board Support</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Misc <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../misc/doc-guide/">Document Guide</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../registers/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../board-package/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/OpenCAPI/oc-accel"><i class="fa fa-github"></i> GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#oc-accel-hardware">OC-Accel Hardware</a></li>
            <li><a href="#diagram-and-clock-domain">Diagram and Clock Domain</a></li>
            <li><a href="#axi4-feature-list">AXI4 feature list</a></li>
            <li><a href="#tlx-feature-list">TLx feature list</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="oc-accel-hardware">OC-Accel Hardware</h1>
<h2 id="diagram-and-clock-domain">Diagram and Clock Domain</h2>
<p>Here is a more detailed diagram for OC-Accel <strong>Bridge</strong> mode.</p>
<p><img alt="clock-domain" src="../pictures/hw-clock-domain.svg" /></p>
<ul>
<li><strong>oc_bsp_wrap</strong> and <strong>oc_cfg</strong> come from oc-bip ( <a href="https://github.com/OpenCAPI/OpenCAPI3.0_Client_RefDesign">OpenCAPI3.0 Device Reference design</a> )</li>
<li><strong>oc_function</strong> comes from OC-Accel <code>hardware/hdl/core</code>.</li>
</ul>
<p>oc_bsp_wrap has DLX, PHY, TLX, VPD (Virtual Product Data) and flash_sub_system. oc_cfg handles the registers defined in OpenCAPI CFG specification. </p>
<p>Under oc_function, <strong>framework_afu</strong> can be replaced by other reference AFUs like AFP3 or MCP3 in <a href="https://github.com/OpenCAPI/OpenCAPI3.0_Client_RefDesign">OpenCAPI3.0 Device Reference design</a>. framework_afu contains its cfg_descriptor to describe the basic settings for this AFU. </p>
<p>It has following clock domains: </p>
<ul>
<li><strong>clk_tlx</strong>: 400MHz (Don't change)</li>
<li><strong>clk_afu</strong>: 200MHz (Adjustable)</li>
<li><strong>clk_act</strong>: 200MHz (Adjustable)</li>
<li><strong>Other</strong>: Depending on the requirements of peripheral IPs</li>
</ul>
<p>The blocks with transitional color means it has the clock converter logic or asynchronous clock interfaces. </p>
<p>A partial reconfiguration region is defined as shown in the dotted box. This area is dynamic area that allows user to change their functional logic and all of the other regions are static in PR (Partial Reconfiguration) Flow.</p>
<h2 id="axi4-feature-list">AXI4 feature list</h2>
<p>Here lists the AXI4 feature list of oc_snap_core: </p>
<h3 id="axi-lite-m">AXI Lite-M</h3>
<table>
<thead>
<tr>
<th>Signal</th>
<th>Width</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADDR</td>
<td>32bits</td>
</tr>
<tr>
<td>DATA</td>
<td>32bits</td>
</tr>
</tbody>
</table>
<h3 id="axi-s">AXI-S</h3>
<table>
<thead>
<tr>
<th>Signal</th>
<th>Bit Width</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADDR (AWADDR/ARADDR)</td>
<td>64</td>
<td>Unaligned address supported</td>
</tr>
<tr>
<td>DATA (WDATA/RDATA)</td>
<td>1024</td>
<td></td>
</tr>
<tr>
<td>ID (AWID/ARID/BID/RID)</td>
<td>1 to 5</td>
<td>2 to 32 AXI IDs</td>
</tr>
<tr>
<td>USER (AWUSER/ARUSER)</td>
<td>9</td>
<td>Support up to 512 PASID (multi-process contexts)</td>
</tr>
<tr>
<td>SIZE (AWSIZE/ARSIZE)</td>
<td>3</td>
<td>All sized transactions from 1 byte to 128bytes are supported</td>
</tr>
<tr>
<td>BURST (AWBURST/ARBURST)</td>
<td>2</td>
<td>INCR</td>
</tr>
<tr>
<td>RESP (BRESP/RRESP)</td>
<td>2</td>
<td>OKAY or ERROR</td>
</tr>
<tr>
<td>WSTRB</td>
<td>128</td>
<td>All patterns are supported</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Choose less AXI IDs can save the area of snap_core. The AXI ID ports have at least 1 bit. Drive zero if the Action hardware design doesn't use it. </p>
<p>AXI signals <code>cache</code>, <code>lock</code>, <code>qos</code>, <code>region</code> are not supported</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Burst type "FIXED" is coded in snap_core but hasn't been tested.</p>
</div>
<h2 id="tlx-feature-list">TLx feature list</h2>
<h3 id="tlx-to-afu-commands">TLX to AFU Commands</h3>
<p>They are connected to mmio_wrapper.</p>
<ul>
<li><strong>pr_mem_read</strong> (4B, 8B)</li>
<li><strong>pr_wr_mem</strong> (4B, 8B)</li>
<li><strong>intrp_rdy</strong></li>
</ul>
<h3 id="afu-to-tlx-commands">AFU to TLX Commands</h3>
<p>They are connected to bridge_wrapper.</p>
<ul>
<li><strong>assign_actag</strong></li>
<li><strong>rd_wnitc</strong> (128B, 64B)</li>
<li><strong>dma_w</strong> (128B, 64B)</li>
<li><strong>dma_pr_w</strong> (1B to 32B)</li>
<li><strong>rd_pr_wnitc</strong> (1B to 32B)</li>
<li><strong>intrp_req</strong></li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../extra.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
